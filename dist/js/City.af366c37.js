(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["City"],{"22c9":function(t,i,s){"use strict";var e=s("ea6a"),n=s.n(e);n.a},ea6a:function(t,i,s){},f262:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"Shopping"},[s("header",{staticClass:"header"},[s("van-icon",{attrs:{name:"arrow-left"},on:{click:function(i){return t.GoBack()}}}),s("h4",[t._v(t._s(t.cities.name))]),s("p",[s("router-link",{attrs:{to:"/home"}},[t._v("切换城市")])],1)],1),s("main",{staticClass:"main"},[s("div",{staticClass:"city"},[s("div",{staticClass:"city-input"},[s("van-cell-group",[s("van-field",{attrs:{placeholder:"输入学校、商务楼、地址"},model:{value:t.cityval,callback:function(i){t.cityval=i},expression:"cityval"}})],1)],1),s("div",{staticClass:"city-button"},[s("van-button",{attrs:{type:"info"},on:{click:function(i){return t.submit()}}},[t._v("提交")])],1)]),t.search.length>0?s("div",{staticClass:"getpois_ul"},[s("ul",t._l(t.search,function(i,e){return s("li",{key:e,on:{click:function(s){return t.CitygoMsite(i)}}},[s("p",[t._v(t._s(i.name))]),s("span",[t._v(t._s(i.address))])])}),0)]):s("div",[t._m(0),s("div",{staticClass:"getpois"},[s("ul",t._l(t.getpois,function(i,e){return s("li",{key:e,on:{click:function(s){return t.CitygoMsite(i)}}},[s("p",[t._v(t._s(i.name))]),s("span",[t._v(t._s(i.address))])])}),0),t.getpois.length>0?s("div",{staticClass:"del",on:{click:function(i){return t.del()}}},[t._v("清空所有")]):t._e()])])])])},n=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"pois"},[s("p",[t._v("搜索历史")])])}],a=s("873c"),o={data:function(){return{cityval:"",cities:[],search:[],getpois:[]}},methods:{GoBack:function(){this.$router.go(-1)},submit:function(){var t=this;""==this.cityval?this.open():this.$http.get("http://elm.cangdu.org/v1/pois?type=search&city_id=".concat(this.cities.id,"&keyword=").concat(this.cityval)).then(function(i){t.search=i.data})},open:function(){this.$toast({message:"请输入内容",position:"bottom"})},CitygoMsite:function(t){var i=Object(a["a"])(this.getpois),s=i.some(function(i){return i.geohash==t.geohash});0==s&&i.push(t),localStorage.setItem("info",JSON.stringify(i)),console.log(i),this.getpois=i,this.$router.push({path:"/msite"}),this.$store.commit("dizhi",t.geohash)},del:function(){this.getpois=[],localStorage.setItem("info",JSON.stringify(this.getpois))}},mounted:function(){var t=this,i=this.$route.params.id;this.$http.get("http://elm.cangdu.org/v1/cities/".concat(i)).then(function(i){t.cities=i.data});var s=JSON.parse(localStorage.getItem("info"));null!=s&&(this.getpois=s)}},c=o,r=(s("22c9"),s("6691")),l=Object(r["a"])(c,e,n,!1,null,"837ebf28",null);i["default"]=l.exports}}]);
//# sourceMappingURL=City.af366c37.js.map